{% extends 'control_panel/base.html' %}

{% block control_content %}
<div class="console-main-header">
    <div>
        <div class="console-main-title">{{ title }}</div>
        <a href="{% url list_url %}" class="console-back">← К списку</a>
    </div>
    {% if delete_url and obj %}
    <form method="post" action="{% url delete_url obj.pk %}" style="display: inline;" onsubmit="return confirm('Удалить запись? Действие необратимо.');">
        {% csrf_token %}
        <button type="submit" class="btn-xs danger">Удалить</button>
    </form>
    {% endif %}
</div>
<div class="console-form">
    <div class="console-form-title">Создание / обновление записи</div>
    <form method="post">
        {% csrf_token %}
        {% if form.non_field_errors %}
        <div class="console-form-errors">{{ form.non_field_errors }}</div>
        {% endif %}
        <div class="console-form-grid">
            {% for field in form %}
            <div class="console-field {% if field.field.widget.input_type == 'checkbox' %}console-field-checkbox{% endif %} {% if field.errors %}has-error{% endif %}">
                <label for="{{ field.id_for_label }}">{{ field.label }}{% if field.field.required %} *{% endif %}</label>
                {{ field }}
                {% if field.help_text %}
                <div class="console-help">{{ field.help_text }}</div>
                {% endif %}
                {% if field.errors %}
                <div class="field-error">{{ field.errors.0 }}</div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <div class="console-form-footer">
            <div class="left">
                <button type="submit" class="btn-xs primary">{{ submit_label }}</button>
                <a href="{% url list_url %}" class="btn-xs">Отмена</a>
            </div>
        </div>
    </form>
</div>
{% endblock %}
