{% extends 'core/base.html' %}
{% load static %}

{% block title %}–ë—ç–∫–∞–ø –ë–î ‚Äî LeaseGrow{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'control_panel/css/control_panel.css' %}">
<link rel="stylesheet" href="{% static 'accounts/css/backup.css' %}">
{% endblock %}

{% block content %}
<div class="console-root backup-page">
    <div class="console-card profile-header" style="margin-bottom: 1.25rem;">
        <div class="console-title">–ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</div>
        <div class="console-subtitle">
            –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é PostgreSQL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
            –ë—ç–∫–∞–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8 –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã.
        </div>
    </div>

    <div class="backup-cards">
        <div class="backup-card">
            <span class="backup-card-icon">üì§</span>
            <h2 class="backup-card-title">–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø</h2>
            <p class="backup-card-desc">
                –°–∫–∞—á–∞–π—Ç–µ –ø–æ–ª–Ω—ã–π –¥–∞–º–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ SQL (UTF-8).
            </p>
            <form method="post" action="{% url 'accounts:backup' %}" class="backup-form">
                {% csrf_token %}
                <input type="hidden" name="action" value="create">
                <button type="submit" class="backup-btn backup-btn-create">
                    –°–æ–∑–¥–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å
                </button>
            </form>
        </div>

        <div class="backup-card">
            <span class="backup-card-icon">üì•</span>
            <h2 class="backup-card-title">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞</h2>
            <p class="backup-card-desc">
                –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª .sql ‚Äî —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.
            </p>
            <form method="post" action="{% url 'accounts:backup' %}" enctype="multipart/form-data" class="backup-form">
                {% csrf_token %}
                <input type="hidden" name="action" value="restore">
                <div class="backup-file-wrap">
                    <input type="file" name="backup_file" accept=".sql" required class="backup-file-input" id="backup-file">
                    <label for="backup-file" class="backup-file-btn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª .sql</label>
                    <span class="backup-file-name" id="backup-file-name"></span>
                </div>
                <button type="submit" class="backup-btn backup-btn-restore">
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                </button>
            </form>
        </div>
    </div>
</div>
<script>
document.getElementById('backup-file').addEventListener('change', function() {
    var nameEl = document.getElementById('backup-file-name');
    nameEl.textContent = this.files.length ? this.files[0].name : '';
});
</script>
{% endblock %}
