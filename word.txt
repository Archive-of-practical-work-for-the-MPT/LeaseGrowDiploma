 
Содержание
ВВЕДЕНИЕ	3
1.	ОБЩАЯ ЧАСТЬ	5
1.1.	Цель разработки	5
1.2.	Средства разработки	5
2.	СПЕЦИАЛЬНАЯ ЧАСТЬ	8
2.1.	Постановка задачи	8
2.1.1.	Входные данные	8
2.1.2.	Выходные данные	9
2.1.3.	Подробные требования к проекту	11
2.2.	Внешняя спецификация	12
2.2.1.	Описание задачи	12
2.2.2.	Входные и выходные данные	24
2.2.3.	Выходные данные	26
2.2.4.	Методы	29
2.2.5.	Тесты	31
2.2.6.	Контроль целостности данных	32
2.3.	Проектирование	34
2.3.1.	Схема архитектуры приложения	34
2.3.2.	Описание облачной базы данных	34
2.3.3.	Структурная схема	37
2.3.4.	Диаграмма классов	40
2.3.5.	Схема тестирования	46
2.3.6.	Схема пользовательского интерфейса.	46
2.4.	Результат работы программы	46
3.	ТЕХНОЛОГИЧЕСКАЯ ЧАСТЬ	51
3.1.	Инструментальные средства	51
3.2.	Отладка программы	53
3.3.	Защитное программирование	53
3.3.1.	Защита от ошибок	53
3.3.2.	Защита приложения	54
3.3.3.	Защита данных	54
3.4.	Характеристики программы	55
ЗАКЛЮЧЕНИЕ	60
СПИСОК ИСПОЛЬЗОВАННЫХ МАТЕРИАЛОВ	63

ПРИЛОЖЕНИЕ А. Сценарии и результаты тестовых испытаний
ПРИЛОЖЕНИЕ Б. Руководство пользователя
ПРИЛОЖЕНИЕ В. Скрипт базы данных
ПРИЛОЖЕНИЕ Г. Текст программы
ПРИЛОЖЕНИЕ Д. Антиплагиат

 
ВВЕДЕНИЕ
На сегодняшний день лизинг техники остаётся одним из основных способов приобретения оборудования для бизнеса без крупных единовременных затрат. Потребители всё чаще выбирают онлайн-подбор и оформление заявок: это удобно, прозрачно по условиям и позволяет сравнивать технику и цены без посещения офиса. Веб-приложения лизинговых компаний позволяют клиентам просматривать каталог техники, выбирать оборудование, оформлять заявки на лизинг и общаться с менеджером в комфортной домашней обстановке.
Веб-приложение LeaseGrow – это платформа для компании по лизингу техники, которая позволяет клиентам регистрироваться и авторизовываться, просматривать каталог техники с отображением характеристик и стоимости, оформлять заявки на лизинг и вести чат с менеджером для согласования условий. Менеджеры получают доступ к панели управления с CRUD по аккаунтам, профилям, категориям техники, технике, компаниям, контактам, договорам лизинга, графикам платежей, обслуживанию и заявкам, а также к статистике с экспортом в Excel и PDF. Администраторы имеют полный доступ к панели администратора: CRUD по всем сущностям, журнал аудита изменений и резервное копирование базы данных.
Современные клиенты ожидают от лизинговых компаний прозрачного каталога, удобного оформления заявок и оперативной связи с менеджером. Возможность подавать заявки и общаться через веб-приложение обеспечивает экономию времени и персонализированный доступ к актуальной информации о доступной технике и условиях лизинга.
В данном проекте разработано веб-приложение LeaseGrow с целью автоматизации работы компании по лизингу техники. Разработанное приложение позволяет клиентам регистрироваться и авторизовываться, просматривать каталог техники, оформлять заявки на лизинг, вести чат с менеджером и редактировать профиль. Менеджеры могут управлять техникой, компаниями, договорами, заявками и формировать статистику с экспортом в Excel и PDF. Администраторы обеспечивают полное управление данными системы, аудит изменений и резервное копирование базы данных.
Применение веб-приложения позволяет автоматизировать процессы оформления лизинга, минимизировать ручной труд в офисах, улучшить контроль за заявками и договорами, а также создать единую систему учёта для менеджеров и администраторов. 
1.	ОБЩАЯ ЧАСТЬ
1.1.	Цель разработки
Целью является разработка веб-приложения LeaseGrow – платформы для компании по лизингу техники. Система предназначена для упрощения взаимодействия между клиентами (пользователями), менеджерами и администраторами. Она обеспечивает хранение и управление данными об аккаунтах, профилях, ролях, категориях техники, производителях, технике, компаниях, контактах компаний, договорах лизинга, графиках платежей, обслуживании, заявках на лизинг и сообщениях чата.
Разработка веб-сервиса позволит:
•	централизованно хранить данные о технике, компаниях и договорах лизинга;
•	автоматизировать процесс оформления заявок на лизинг и согласования с менеджером;
•	вести учёт заявок, договоров и обслуживания;
•	реализовать систему ролей (Клиент, Менеджер, Администратор) с разграничением доступа;
•	предоставить менеджерам CRUD по ограниченному набору таблиц, а также статистику и экспорт в Excel/PDF;
•	предоставить администраторам полный CRUD по всем сущностям, журнал аудита и резервное копирование БД.
Таким образом, создаваемое приложение автоматизирует ключевые процессы лизинговой компании и может использоваться как основа корпоративного сайта по лизингу техники.
1.2.	Средства разработки
Для разработки программного обеспечения, реализующего свой функционал в виде веб-приложения, а также реляционной базы данных PostgreSQL, были использованы средства разработки, представленные в таблице 1.
Таблица 1 - Технические средства
№	Тип оборудования	Наименование оборудования
1	2	4
Nitro AN515-58
1	Процессор	Intel Core i7-12700H (14 ядер, 20 потоков)
2	Оперативная память	16 ГБ DDR4
3	Накопитель	SSD 512 ГБ
4	Интерфейсы	USB 3.2, USB-C, HDMI 2.1, LAN, Wi-Fi 6, Bluetooth 5.2
5	Операционная система	Windows 11 Pro
В таблице 2 представлены минимальные и рекомендованные технические средства, на базе которых возможно комфортное использование реализуемого приложения.
Таблица 2 - Конфигурация технических средств
№	Тип оборудования	Наименование оборудования
1	2	3
Максимальные или рекомендуемые
1	Операционная система	Windows 11 Pro / Ubuntu 22.04 LTS
2	Экран	15.6" IPS, матовый
3	Разрешение экрана	1920x1080 (Full HD)
4	Процессор	Intel Core i7 (12-го поколения) / AMD Ryzen 7 5800H
5	Количество ядер процессора	8
6	Оперативная память	16 ГБ DDR4/DDR5
7	Накопитель	SSD NVMe 512 ГБ и выше
8	Батарея	70 Вт·ч 
9	Поддержка виртуализации	VT-x / AMD-V – Да
10	Поддержка Docker и WSL2	Да
11	Подключение к интернету	Wi-Fi 6 / LAN Gigabit
12	Видеокарта	NVIDIA GeForce RTX 3060 или встроенная Intel Iris Xe
13	Поддержка Bluetooth	5.2
14	Порты	USB 3.2, USB-C, HDMI, RJ-45
15	Веб-камера и микрофон	Full HD 1080p, встроенные
Минимальные
№	Тип оборудования	Наименование оборудования
1	Операционная система	Windows 10 / Ubuntu 20.04 LTS
2	Экран	14"
3	Разрешение экрана	1366x768 (HD)
4	Процессор	Intel Core i3 (6-го поколения) / AMD Ryzen 3
5	Количество ядер процессора	2–4
6	Оперативная память	4 ГБ DDR4
7	Накопитель	HDD 500 ГБ или SSD 128 ГБ
8	Батарея	40 Вт·ч (автономность 3–4 ч)
9	Поддержка виртуализации	Желательно
10	Поддержка Docker и WSL2	Ограниченная
11	Подключение к интернету	Wi-Fi 4/5, LAN
12	Видеокарта	Интегрированная (Intel HD Graphics / AMD Vega)
13	Поддержка Bluetooth	4.0
14	Порты	USB 2.0, HDMI
Для разработки приложения использовались программные средства, представленные в таблице 3.
Таблица 3 - Программные средства разработки
№	Тип средства	Название средства	Назначение
1	2	3	4
1	Операционная система	Windows 11 Pro	Рабочая среда разработки
2	Среда разработки	VS Code	Создание и отладка веб-приложения
3	Язык программирования	Python 3.13	Основной язык разработки
4	Фреймворк	Django 5.2	Реализация веб-приложения и бизнес-логики
5	Фреймворк	Django REST Framework 3.16	Реализация API и сериализации данных
5	Система управления базами данных	PostgreSQL 16	Хранение реляционных данных
7	Система контроля версий	Git 2.44	Управление версиями проекта
8	Графический редактор	Draw.io	Проектирование интерфейсов
9	Текстовый редактор	Microsoft Word 2021	Оформление пояснительной записки
12	Браузер	Яндекс Браузер	Доступ к веб-интерфейсу и тестирование системы
 
2.	СПЕЦИАЛЬНАЯ ЧАСТЬ
2.1.	Постановка задачи
Разработать веб-приложение LeaseGrow – платформу для компании по лизингу техники с целью организации онлайн-оформления заявок на лизинг, управления аккаунтами пользователей (клиентов, менеджеров и администраторов), каталогом техники, компаниями, договорами лизинга, заявками и чатом между клиентом и менеджером. Приложение должно включать в себя реляционную базу данных PostgreSQL и веб-интерфейс на Django, обеспечивающий взаимодействие пользователя с базой данных.
2.1.1.	Входные данные
Аутентификация:
•	Email или логин (username);
•	Пароль;
•	Тип пользователя (роль: client, manager, admin).
Профили пользователей:
•	Email, username, пароль (хэш), роль, дата создания (account);
•	Имя, фамилия, телефон, дата рождения (user_profile).
Справочники и сущности:
•	Роли: название (client, manager, admin), описание, права доступа (JSON).
•	Категории техники: название, описание, родительская категория.
•	Производители: название, страна, сайт.
•	Техника: название, модель, категория, производитель, цена, ставка месячной аренды, статус (available, leased, maintenance, sold), VIN, состояние (new, used, refurbished).
•	Компании: название, ИНН, КПП, ОГРН, юридический адрес, контакты, статус.
•	Контакты компаний: компания, ФИО, должность, телефон, email.
•	Договоры лизинга: номер, компания, техника, даты начала/окончания, сумма, ежемесячный платёж, статус.
•	Графики платежей: договор, номер платежа, дата, сумма, статус.
•	Обслуживание: техника, тип, описание, дата проведения, стоимость.
•	Заявки на обслуживание: техника, компания, описание, срочность, статус.
•	Заявки на лизинг: техника, аккаунт клиента, статус (pending, confirmed, rejected), сообщение, заметки менеджера.
•	Сообщения чата: заявка на лизинг, отправитель, текст, дата.
Журнал аудита:
•	Таблица, запись, операция (INSERT/UPDATE/DELETE), старые/новые данные (JSON), кто изменил, когда.
2.1.2.	Выходные данные
Данные для публичных страниц:
•	Главная страница, страница «Политика конфиденциальности».
•	Страница «Лизинг»: каталог техники с отображением названия, модели, цены, ставки аренды, статуса.
Данные для авторизованного клиента:
•	Профиль: личные данные (ФИО, email, логин, телефон), возможность редактирования.
•	Заявки на лизинг: список поданных заявок с техникой и статусом.
•	Чат: обмен сообщениями с менеджером по заявке на лизинг.
Данные процесса оформления заявки на лизинг:
•	Выбор техники из каталога.
•	Создание заявки с сообщением (опционально).
•	Общение с менеджером в чате; подтверждение или отклонение заявки менеджером.
Данные для менеджера:
•	Панель управления: CRUD по аккаунтам, профилям, категориям техники, технике, компаниям, контактам, договорам лизинга, графикам платежей, обслуживанию, заявкам на обслуживание.
•	Чат: просмотр заявок и переписка с клиентами, подтверждение/отклонение заявок.
•	Статистика: диаграммы и сводки; экспорт в Excel и PDF.
Данные для администратора:
•	Панель администратора: полный CRUD по всем таблицам.
•	Журнал аудита: просмотр изменений, внесённых через панель.
•	Резервное копирование и восстановление: создание дампа БД в .sql и восстановление из файла.
2.1.3.	Подробные требования к проекту
Необходимо спроектировать информационную систему, включающую:
•	веб-приложение для клиентов (публичные страницы, каталог техники, заявки на лизинг, профиль, чат с менеджером);
•	веб-интерфейс для менеджеров и администраторов (панели с CRUD и статистикой);
•	реляционную базу данных (PostgreSQL), реализующую хранение, обработку и защиту данных.
В процессе проектирования требуется разработать:
•	диаграмму прецедентов;
•	архитектурную схему программы;
•	логическую и физическую модели базы данных;
•	диаграммы классов;
•	схемы тестирования.
База данных размещается в PostgreSQL и должна обеспечивать:
•	контроль целостности данных и ограничений (внешние ключи, уникальность полей);
•	хранение паролей в виде хэша;
•	учёт изменений через журнал аудита.
Веб-приложение должно реализовать функционал:
•	регистрация и аутентификация пользователей по email/логину и паролю;
•	просмотр и редактирование профиля (для клиентов);
•	просмотр каталога техники;
•	оформление заявки на лизинг и общение с менеджером в чате;
•	разграничение доступа по ролям (client, manager, admin) к панелям и функциям.
2.2.	Внешняя спецификация
2.2.1.	Описание задачи
Данное программное решение должно состоять из реляционной базы данных под управлением СУБД PostgreSQL и клиент-серверного веб-приложения, реализованного на базе фреймворка Django с использованием Django REST Framework.
Веб-приложение должно предоставлять REST API для взаимодействия клиентской части с сервером и базой данных, а также обеспечивать разграничение функциональности по ролям пользователей.
На этапе анализа были определены основные роли: неавторизованный пользователь, клиент, менеджер, администратор, и их возможности в системе.
Функциональность по ролям:
Неавторизованный пользователь обладает следующими возможностями:
просмотр главной страницы;
просмотр каталога техники (страница «Лизинг»);
регистрация в системе в роли «Клиент»;
авторизация в системе.
Клиент обладает следующими возможностями:
все возможности неавторизованного пользователя;
управление профилем (редактирование персональных данных: имя, фамилия, email, логин, пароль);
оформление заявок на лизинг (выбор техники и отправка заявки);
общение с менеджером в чате по заявке;
просмотр статуса своих заявок.
Менеджер обладает следующими возможностями:
панель управления: CRUD по аккаунтам, профилям, категориям техники, технике, компаниям, контактам, договорам лизинга, графикам платежей, обслуживанию, заявкам на обслуживание;
просмотр заявок на лизинг и чат с клиентами;
подтверждение или отклонение заявок на лизинг;
статистика с круговыми и столбчатыми диаграммами;
экспорт статистики в Excel и PDF.
Администратор обладает следующими возможностями:
все возможности менеджера;
полное управление данными системы: CRUD по всем таблицам;
просмотр журнала аудита (история изменений, внесённых через панель администратора);
резервное копирование и восстановление базы данных.
В процессе анализа предметной области была создана диаграмма прецедентов (рисунок 1), на которой показано, какие пользователи взаимодействуют с приложением и какие функции они выполняют для достижения целей системы.
 
Рисунок 1 – Use Case.
2.2.2.	Входные и выходные данные
В таблице 4 представлены входные данные, вводимые пользователем в приложение.
Таблица 4 - Входные данные
Имя	Тип	Ограничение	Формат ввода	Описание
1	2	3	4	5
Форма аутентификации
Email	string	name@domain.tld, уникальное, ≤255	Текстовое поле	Email пользователя (логин)
Password	string	8–64 символа, хранится как hash	Поле ввода пароля	Пароль
Аккаунты
id_account	serial	PK	Авто	Идентификатор
email	string	unique, NOT NULL	Текст	Email
password				Пароль (хэш)
role_id	int	FK -> roles	Выбор	Роль (USER/MANAGER/ADMIN)
created_at	timestamp	Авто	—	Дата создания
Пользователи (users)
id_user	serial	PK	Авто	Идентификатор
account_id	int	FK -> accounts, UNIQUE	Связь	Аккаунт
first_name	string	≤50	Текст	Имя
patronymic	string	≤50, nullable	Текст	Отчество
last_name	string	≤50	Текст	Фамилия
phone	string	≤20, nullable	Текст	Телефон
passport_number	string	≤20, unique, nullable	Текст	Номер паспорта
birthday	date	nullable	Календарь	Дата рождения
Аэропорты (airports)
id_airport	char(3)	PK	Текст	Код ИАТА
name	string	≤255	Текст	Название
city	string	≤100	Текст	Город
country	string	≤50	Текст	Страна
Самолёты (airplanes)
id_airplane	serial	PK	Авто	Идентификатор
model	string	≤50	Текст	Модель
registration_number	string	≤20, unique	Текст	Бортовой номер
capacity	int	NOT NULL	Число	Вместимость
economy_capacity, business_capacity, first_capacity	int	nullable	Число	Вместимость по классам
rows, seats_row	int	nullable	Число	Ряды и мест в ряду
Рейсы (flights)
id_flight	serial	PK	Авто	Идентификатор
airplane_id	int	FK -> airplanes	Выбор	Самолёт
departure_airport_id	char(3)	FK -> airports	Выбор	Аэропорт вылета
arrival_airport_id	char(3)	FK -> airports	Выбор	Аэропорт прилёта
departure_time, arrival_time	datetime	NOT NULL	Дата/время	Время вылета/прилёта
actual_departure_time, actual_arrival_time	datetime	nullable	Дата/время	Фактическое время
status	string	SCHEDULED/DELAYED/CANCELLED/COMPLETED	Выбор	Статус рейса
Пассажиры (passengers)
id_passenger	serial	PK	Авто	Идентификатор
first_name, patronymic, last_name	string	≤50	Текст	ФИО
passport_number	string	≤20, unique	Текст	Номер паспорта
birthday	date	NOT NULL	Календарь	Дата рождения
Платежи (payments)
id_payment	serial	PK	Авто	Идентификатор
user_id	int	FK -> users	Выбор	Пользователь
total_cost	decimal	NOT NULL	Число	Сумма
payment_method	string	CARD/CASH/ONLINE	Выбор	Способ оплаты
status	string	PENDING/COMPLETED/FAILED	Выбор	Статус
Билеты (tickets)
id_ticket	serial	PK	Авто	Идентификатор
flight_id	int	FK -> flights	Выбор	Рейс
class_id	int	FK -> class	Выбор	Класс
seat_number	string	≤5	Текст	Номер места
price	decimal	NOT NULL	Число	Цена
status	string	AVAILABLE/BOOKED/PAID/CHECKED_IN/CANCELLED	Выбор	Статус
passenger_id	int	FK -> passengers, nullable	Выбор	Пассажир
payment_id	int	FK -> payments, nullable	Выбор	Платёж
Багаж (baggage)
id_baggage	serial	PK	Авто	Идентификатор
ticket_id	int	FK -> tickets	Выбор	Билет
baggage_type_id	int	FK -> baggage_types	Выбор	Тип багажа
weight_kg	decimal	NOT NULL	Число	Вес, кг
baggage_tag	string	≤12, unique	Текст	Номер багажной бирки
status	string	REGISTERED/LOADED/DELIVERED/LOST	Выбор	Статус

Таблица 5 – Выходные данные
Имя	Тип	Ограничение	Формат ввода
1	2	3	4
Каталог курсов
courseId	>0	Число	ID курса
title	≤100	Строка	Название
description	до нескольких тыс. символов	Строка	Краткое описание
teacherName	≤50	Строка	ФИО преподавателя
category	≤50	Строка	Категория
price	≥0	Число	Стоимость
status	словарь course_statuses	Строка	Идет набор/Активный/Заполнен/Архивный
startDate/endDate	YYYY-MM-DD	Дата	Период проведения
capacity	≥0 или null	Число	Всего мест
enrolledCount	≥0	Число	Записанные студенты
imageUrl	URL	Строка	Обложка
Уроки курса
lessonId	>0	Число	ID урока
title	≤100	Строка	Название
content	text	Строка	Конспект и ссылки
attachedFile	URL/путь	Строка	Материалы
status	lesson_statuses	Строка	Состояние
courseId	>0	Число	Ссылка на курс
Записи пользователя			
enrollmentId	>0	Число	ID записи
courseTitle	≤100	Строка	Курс
date	YYYY-MM-DD	Дата	Плановая дата
status	enrollment_statuses	Строка	Ожидает подтверждения/Активный/Отменена
checks	список	Объект	Платежи по записи
Задания курса
taskId	>0	Число	ID задания
lessonTitle	≤100	Строка	Урок
deadline	YYYY-MM-DD	Дата	Крайний срок
status	task_statuses	Строка	Новое/…/Проверено
attachments	URL/путь	Строка	Файл условий
solutionsCount	≥0	Число	Количество решений
Решения студентов
solutionId	>0	Число	ID решения
studentName	≤50	Строка	Автор
taskTitle	≤100	Строка	Задание
submitDate	YYYY-MM-DD	Дата	Дата сдачи
status	solution_statuses	Строка	Сдано/С опозданием/…
answerText	text	Строка	Ответ
answerFile	URL/путь	Строка	Файл
gradeValue	0–100	Число	Оценка
feedback	≤255	Строка	Комментарий
Имя	Тип	Ограничение	Формат ввода
1	2	3	4
Платежи и чеки
checkId	>0	Число	ID платежа
courseTitle	≤100	Строка	Курс
amount	>0	Число	Сумма
paymentDate	YYYY-MM-DD	Дата	Дата оплаты
status	payment_statuses	Строка	Ждет подтверждения/Оплачен/Ошибка
Сертификаты
certificateId	>0	Число	ID
certificateNumber	уникальный	Строка	Код
courseTitle	≤100	Строка	Курс
issueDate	YYYY-MM-DD	Дата	Дата выдачи
status	certificate_statuses	Строка	Актуален/Неактуален
fileUrl	URL	Строка	Ссылка на документ
emailSent	true/false	Булево	Отправлен по email
Комментарии
commentId	>0	Число	ID
author	≤50	Строка	Имя автора
text	text	Строка	Сообщение
createdAt	ISO datetime	Дата/время	Отметка времени
contextType	lesson/task	Строка	Контекст
parentCommentId	>0 или null	Число	Родитель
Профиль пользователя
userId	>0	Число	Идентификатор
fullName	≤75	Строка	ФИО
email	name@domain.tld	Строка	Email
role	roles.role_name	Строка	Роль
imageUrl	URL	Строка	Аватар
courses	список	Объект	История и прогресс
certificates	список	Объект	Полученные сертификаты
Админ-данные
usersStats	агрегаты	Объект	Статистика пользователей
coursesStats	агрегаты	Объект	Статистика курсов
paymentsReports	списки	Объект	Отчеты по оплатам
activityLogs	список	Объект	Журнал действий (AuditLog)
crudEntities	множество моделей	Объект	Результаты CRUD для пользователей, курсов, уроков, заданий, решений, статусов, платежей, сертификатов, комментариев

2.2.3.	Методы
База данных нормализована и реализована через Django ORM с миграциями. Веб-приложение реализовано на Django (MTV: Model-Template-View); бизнес-логика сосредоточена в представлениях (views) и вспомогательных модулях (forms). Архитектура – app-level: apps.accounts, apps.catalog, apps.leasing, apps.core, apps.manager, apps.control_panel. Валидация данных выполняется в формах Django и при CRUD в панелях управления. Для защиты от некорректного ввода используются проверки на уровне моделей (ограничения БД) и в коде.
2.2.4.	Тесты
Сценарий тестирования и результаты тестовых испытании приведен в приложении А «Сценарий и результаты тестовых испытаний».
2.2.5.	Контроль целостности данных
Таблица 6 – Контроль целостности данных
№	Ситуация	Аномалия	Реакция	Примечание
1	2	3	4	5
1	Авторизация	Введена несуществующая пара email/пароль	Сообщение «Неверный email или пароль» и отказ входа	В views.login_view проверяется check_password; при несовпадении или отсутствии аккаунта возвращается messages.error и форма входа
2	Регистрация	Email уже есть в таблице accounts (уникальный Account.email)	Сообщение «Пользователь с таким email уже существует», форма не отправляется	Проверка Account.objects.filter(email=email).exists() в views.register_view до создания аккаунта; в БД ограничение UNIQUE на accounts.email
3	Регистрация	Пароль и подтверждение не совпадают	Сообщение «Пароли не совпадают», возврат на форму регистрации	В views.register_view сравнение password и password_confirm до сохранения
4	Регистрация	Не заполнены обязательные поля (имя, фамилия, email, пароль)	Сообщение «Пожалуйста, заполните все обязательные поля»	Проверка в register_view перед созданием Account и User
5	Регистрация	Пароль короче 6 символов	Сообщение «Пароль должен содержать минимум 6 символов»	Валидация длины пароля в register_view
6	Создание/обновление записи (CRUD)	Не заданы обязательные поля модели	Сообщения вида «Поле «…» обязательно для заполнения»	Функция _validate_crud_data в admin_views проверяет обязательность полей; при наличии validation_errors выполняется redirect без сохранения
7	Создание/обновление записи (CRUD)	Телефон не соответствует формату (не только цифры и +)	Сообщение «Поле «Телефон» должно содержать только цифры (в начале допускается +)»	Валидация по регулярному выражению в _validate_crud_data для поля phone
8	Создание/обновление записи (CRUD)	Номер паспорта не соответствует формату (не только цифры и пробелы)	Сообщение «Поле «…» должно содержать только цифры и пробелы»	Валидация в _validate_crud_data для поля passport_number
9	Создание/обновление записи (CRUD)	Отрицательная сумма (total_cost, price, base_price, weight_kg и т.д.) или отрицательное количество	Сообщение «Поле «…» должно быть не меньше нуля»	Проверка для DecimalField и IntegerField в _validate_crud_data; сохранение не выполняется
10	Создание рейса	Время прилёта раньше или равно времени вылета	Ошибка сохранения на уровне БД	Ограничение CHECK (departure_time < arrival_time) в таблице flights (create_tables.sql); IntegrityError преобразуется в понятное сообщение через get_user_friendly_message
11	Создание/обновление билета	Один и тот же номер места на одном рейсе уже существует	Ошибка сохранения на уровне БД	Ограничение UNIQUE (flight_id, seat_number) в таблице tickets; при IntegrityError пользователю показывается сообщение о противоречии правилам
12	Покупка билета (шаг 1)	Не выбран класс обслуживания	Сообщение «Выберите класс обслуживания»	Проверка в views.buy_ticket перед переходом на шаг выбора места
13	Покупка билета (шаг 2)	Не выбрано место	Сообщение «Выберите место»	Проверка в views.buy_ticket_seat при POST
14	Покупка билета (шаг 2)	Выбранное место уже занято (статус билета не AVAILABLE)	Сообщение «Это место уже занято»	Проверка в buy_ticket_seat по статусу билета (BOOKED, PAID, CHECKED_IN) перед подтверждением выбора
15	Покупка билета (шаг 3)	Место стало занято между выбором и оплатой	Сообщение «Это место уже занято. Пожалуйста, выберите другое место», редирект на шаг выбора места	Повторная проверка в views.buy_ticket_confirm перед созданием платежа и обновлением билета
16	Создание/обновление пассажира или пользователя	Дубликат номера паспорта	Ошибка сохранения на уровне БД	Ограничение UNIQUE на passport_number в таблицах passengers и users; IntegrityError обрабатывается в exceptions_utils
17	Регистрация багажа	Дубликат номера багажной бирки (baggage_tag)	Ошибка сохранения на уровне БД	Ограничение UNIQUE на baggage_tag в таблице baggage
18	CRUD администратора/менеджера	Пароль не указан при создании аккаунта	Сообщение «Пароль обязателен при создании аккаунта»	Проверка в admin_views перед созданием записи Account
19	CRUD администратора/менеджера	Связанная запись по внешнему ключу не найдена (несуществующий ID)	Сообщение «Связанная запись не найдена. Выберите существующее значение.»	Обработка исключения при присвоении FK в admin_crud/manager_crud
20	Восстановление БД	Не выбран файл резервной копии	Сообщение «Выберите файл резервной копии (.sql)»	Проверка в views.restore_database
21	Восстановление БД	Файл не имеет расширения .sql	Сообщение «Файл должен иметь расширение .sql»	Проверка backup_file.name.endswith('.sql') в restore_database
№	Ситуация	Аномалия	Реакция	Примечание
2.3.	Проектирование
2.3.1.	Схема архитектуры приложения
На Рисунке 2 представлена архитектурная схема веб приложения.
 
Рисунок 2 – Архитектурная схема.
2.3.2.	Логическая модель базы данных
На Рисунке 3 представлена логическая модель базы данных, на основе которой была реализована логика манипуляции данными проектируемой базы данных.
 
Рисунок 3 – Логическая модель базы данных.
2.3.3.	Физическая модель базы данных
На рисунке 4 представлена физическая модель базы данных, на основе которой была реализована логика хранения и защиты данных, проектируемой базы данных.
 
Рисунок 4 – Физическая модель базы данных.
База данных содержит сущности: role, account, user_profile, equipment_category, manufacturer, equipment, company, company_contact, lease_contract, payment_schedule, maintenance, maintenance_request, lease_request, chat_message, audit_log.
2.3.4.	Структурная схема
На Рисунке 5 представлена структурная схема приложения.
 
Рисунок 5 – Структурная схема приложения.
Схема проекта LeaseGrow отражает классический Django-подход MTV (Model-Template-View) и app-level архитектуру: представление (шаблоны HTML и статика) отделено от контроллеров (views), бизнес-логики (forms) и уровня данных (модели в apps.accounts, apps.catalog, apps.leasing + PostgreSQL). 
Схема также представлена в табличном виде, в таблице 7.
Таблица 7 – Структура приложения.
№	Наименование модуля	Описание
1	2	3
Конфигурация и инфраструктура
1	manage.py	Точка входа Django; запуск сервера, миграций и команд (runserver, migrate и др.)
2	config/settings	Настройки проекта: база данных PostgreSQL, установленные приложения (airline, django.contrib.*), шаблоны, статика, middleware, context processors, переменные окружения
3	config/urls.py	Главный маршрутизатор URL проекта; подключение маршрутов приложения airline
4	apps (accounts, catalog, leasing, core, manager, control_panel)/urls.py	Маршрутизация URL приложения airline (главная, о нас, контакты, рейсы, вход/регистрация, профиль, покупка билета, панели админа/менеджера, отчётность, бэкап/восстановление)
5	apps (accounts, catalog, leasing, core, manager, control_panel)/apps.py	Конфигурация приложения airline (AppConfig)
6	apps (accounts, catalog, leasing, core, manager, control_panel)/context_processors.py	Контекст-процессор admin_status: добавление is_admin, is_manager, is_authenticated в контекст всех шаблонов на основе account.role_id.role_name для отображения пунктов меню по ролям
7	apps (accounts, catalog, leasing, core, manager, control_panel)/middleware.py	Промежуточное ПО приложения airline (при наличии)
8	.env / python-dotenv	Переменные окружения (DB_HOST, DB_PASSWORD, PG_BIN_PATH и др.); загрузка через python-dotenv в settings
9	scripts/setup_database.py	Инициализация БД: создание базы данных, выполнение create_tables.sql, triggers.sql, procedures_views.sql, insert_initial_data.sql; флаги --create, --seed, --init-db, --fake-migrate
10	scripts/create_tables.sql	Создание таблиц PostgreSQL (роли, аккаунты, пользователи, аэропорты, самолёты, рейсы, пассажиры, классы, платежи, билеты, типы багажа, багаж, журнал аудита)
11	scripts/triggers.sql	Триггеры в БД: запись в журнал аудита, генерация номеров билетов/багажных бирок
12	scripts/procedures_views.sql	Процедуры (calc_flight_revenue, calc_flight_occupancy, calc_user_payments_in_period) и представления отчётности (v_flights_report, v_airports_revenue_report, v_audit_operations_report)
13	scripts/insert_initial_data.sql	Первичное заполнение справочников и тестовых данных (роли, аэропорты, классы, типы багажа и др.)
Слой логики и утилит
14	apps (accounts, catalog, leasing, core, manager, control_panel)/db_reports.py	Вызов процедур и представлений PostgreSQL: выручка по рейсу, загрузка рейса, платежи пользователя за период; получение отчётных данных (рейсы, выручка по аэропортам, операции аудита)
15	apps (accounts, catalog, leasing, core, manager, control_panel)/audit_utils.py	Запись в журнал аудита при создании/обновлении/удалении записей через админ-CRUD (model_instance_to_audit_dict, get_record_id_for_audit, log_audit)
16	apps (accounts, catalog, leasing, core, manager, control_panel)/exceptions_utils.py	Преобразование исключений (IntegrityError, ValidationError, Http404, ValueError и др.) в понятные пользователю сообщения на русском (get_user_friendly_message)
17	apps (accounts, catalog, leasing, core, manager, control_panel)/forms.py	Формы с валидацией (ProfileForm и др.) для ввода данных пользователя и отображения ошибок
Представления (контроллеры)
18	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления веб-страниц: главная (index), о нас (about), контакты (contacts), политика (privacy), рейсы с фильтрацией и пагинацией (flights)
19	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления аутентификации: вход (login_view), регистрация (register_view), выход (logout_view)
20	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представление профиля (profile_view): личные данные, история заказов, вкладки отчётности и резервного копирования для менеджера/администратора
21	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления покупки билета: выбор рейса (buy_ticket), выбор места и класса (buy_ticket_seat), подтверждение и оплата (buy_ticket_confirm)
22	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления отчётности (reports_view), экспорта статистики в CSV/PDF (export_statistics), резервного копирования и восстановления БД (backup_database, restore_database) — только для администратора
23	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Обработчики ошибок: страница не найдена (custom_page_not_found, page_not_found_catchall), ошибка сервера (custom_server_error)
24	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	Панель администратора (admin_panel): отображение таблиц и CRUD по всем сущностям (роли, аккаунты, пользователи, аэропорты, самолёты, рейсы, пассажиры, классы, платежи, билеты, типы багажа, багаж)
25	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	CRUD администратора (admin_crud), получение записи (admin_get_record), получение опций для форм (admin_get_options); валидация _validate_crud_data
26	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	Панель менеджера (manager_panel): CRUD по ограниченному набору таблиц (рейсы, пассажиры, платежи, билеты, багаж); manager_crud, manager_get_record, manager_get_options
27	apps (accounts, catalog, leasing, core, manager, control_panel)/api_views.py	ViewSet'ы REST API: AirportViewSet, FlightViewSet, TicketViewSet, UserViewSet, AccountViewSet, PaymentViewSet, PassengerViewSet, ClassViewSet, AirplaneViewSet, RoleViewSet, BaggageTypeViewSet, BaggageViewSet
28	apps (accounts, catalog, leasing, core, manager, control_panel)/api_permissions.py	Проверка прав доступа к API (авторизация по сессии, роль ADMIN для административных эндпоинтов)
Сериализаторы и представление (DTO / View)
29	apps (accounts, catalog, leasing, core, manager, control_panel)/serializers.py	Сериализаторы DRF для преобразования моделей в JSON: RoleSerializer, AirportSerializer, AirplaneSerializer, FlightSerializer, PassengerSerializer, ClassSerializer, AccountSerializer, UserSerializer, PaymentSerializer, TicketSerializer, BaggageTypeSerializer, BaggageSerializer
30	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/base.html	Базовый шаблон: шапка с навигацией, футер, баннер согласия с политикой, переключение светлой/тёмной темы
31	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/index.html	Главная страница (карусель, блоки предложений, призыв к рейсам)
32	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/login.html, register.html	Страницы входа и регистрации
33	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/flights.html, flights_table.html, flights_pagination.html	Страница рейсов с фильтрами и пагинацией
34	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/buy_ticket_step1.html, buy_ticket_step2.html, buy_ticket_step3.html	Пошаговая покупка билета (выбор рейса, места и класса, пассажир и оплата)
35	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/profile.html	Профиль пользователя (вкладки: личные данные, мои заказы, отчётность, резервное копирование)
36	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/admin_panel.html	Панель администратора (таблицы, CRUD-формы)
37	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/reports.html, statistics_export.html	Страницы отчётности и экспорта статистики
38	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/about.html, contacts.html, privacy.html	Страницы «О нас», «Контакты», «Политика конфиденциальности»
39	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/404.html, 500.html	Страницы ошибок «Страница не найдена» и «Ошибка сервера»
40	apps (accounts, catalog, leasing, core, manager, control_panel)/static/css/style.css, pages.css	Стили: переменные светлой/тёмной темы, шапка, футер, страницы, формы
41	apps (accounts, catalog, leasing, core, manager, control_panel)/static/images/	Изображения (логотип, фоны, иллюстрации)
42	apps (accounts, catalog, leasing, core, manager, control_panel)/static/brandbook.html	Страница брендбука (цвета, логотип) — открывается локально без запуска сайта
43	apps (accounts, catalog, leasing, core, manager, control_panel)/templatetags/audit_filters.py	Пользовательские теги/фильтры для шаблонов
Модели (apps.accounts, apps.catalog, apps.leasing)
44	Role	Модель роли пользователя (client, manager, admin)
45	Account	Модель аккаунта (email, username, пароль, роль, дата создания)
46	UserProfile	Модель профиля пользователя (связь с аккаунтом, имя, фамилия, телефон, дата рождения)
47	EquipmentCategory	Модель категории техники (название, описание)
48	Manufacturer	Модель производителя (название, страна)
49	Equipment	Модель техники (название, модель, категория, производитель, цена, ставка аренды, статус)
50	Company	Модель компании (название, ИНН, статус)
51	CompanyContact	Модель контакта компании (ФИО, должность, телефон, email)
52	LeaseContract	Модель договора лизинга (номер, компания, техника, даты, сумма, платёж)
53	PaymentSchedule	Модель графика платежей (договор, номер, дата, сумма, статус)
54	Maintenance	Модель обслуживания (техника, тип, дата, стоимость)
55	LeaseRequest	Модель заявки на лизинг (техника, аккаунт, статус, сообщение)
56	ChatMessage	Модель сообщения чата (заявка, отправитель, текст)
57	AuditLog	Модель журнала аудита (таблица, запись, операция, старые/новые данные, кто изменил, когда)
Доступ к данным (Django ORM)
57	Django ORM (Model.objects)	Доступ к данным через модели airline: фильтрация, создание, обновление, удаление; запросы к PostgreSQL без отдельного слоя репозиториев (используются менеджеры моделей и методы объектов)
Тесты и внешние зависимости
58	LeaseGrow/tests/test_api.py, test_crud.py, test_export.py	Тесты API, CRUD и экспорта
59	LeaseGrow/tests/locust/locustfile.py	Нагрузочные тесты (Locust)
60	Django 5.2, Django REST Framework, psycopg2-binary, python-dotenv, Pillow, Locust	Внешние библиотеки и зависимости (requirements.txt)
2.3.5.	Диаграмма классов
На рисунках 6-9 изображена диаграмма классов веб-приложения.
 

 
Рисунок 6 – Диаграмма классов.
 
Рисунок 7 – Диаграмма классов (1).
 
Рисунок 8 – Диаграмма классов (2).
 
Рисунок 9 – Диаграмма классов (3).
 

Таблица 8 - Описание диаграммы классов
№	Наименование	Описание
1	Role	Модель роли пользователя в системе (USER, MANAGER, ADMIN)
2	Account	Модель аккаунта, содержащая email, хэш пароля, связь с ролью и дату создания
3	User	Модель профиля пользователя, содержащая связь с аккаунтом, ФИО, телефон, паспорт и дату рождения
4	Airport	Модель аэропорта, содержащая код ИАТА (3 символа), название, город и страну
5	Airplane	Модель самолёта, содержащая модель, бортовой номер, вместимость и вместимость по классам (эконом, бизнес, первый), ряды и места в ряду
6	Flight	Модель рейса, содержащая самолёт, аэропорты вылета и прилёта, время вылета/прилёта, фактические времена и статус (запланирован, задержан, отменён, выполнен)
7	Passenger	Модель пассажира, содержащая ФИО, номер паспорта и дату рождения
8	Class	Модель класса обслуживания (ECONOMY, BUSINESS, FIRST)
9	Payment	Модель платежа, содержащая пользователя, сумму, способ оплаты (карта, наличные, онлайн) и статус (ожидает, завершён, ошибка)
10	Ticket	Модель билета, содержащая рейс, класс, номер места, цену, статус (свободен, забронирован, оплачен, зарегистрирован, отменён), пассажира и платёж
11	BaggageType	Модель типа багажа, содержащая название (ручная кладь, стандартный и др.), максимальный вес, описание и базовую цену
12	Baggage	Модель багажа, содержащая билет, тип багажа, вес, уникальный номер багажной бирки и статус (зарегистрирован, загружен, выдан, утерян)
13	AuditLog	Модель журнала аудита, содержащая имя таблицы, ID записи, операцию (INSERT/UPDATE/DELETE), старые и новые данные (JSON), кто изменил и когда
14	db_reports	Модуль вызова процедур и представлений PostgreSQL: выручка по рейсу, загрузка рейса, платежи пользователя за период, отчёты по рейсам и аэропортам, операции аудита
15	audit_utils	Модуль записи в журнал аудита: преобразование экземпляра модели в словарь, получение ID записи, запись в audit_log при создании/обновлении/удалении через админ-CRUD
16	exceptions_utils	Модуль преобразования исключений (IntegrityError, ValidationError, Http404, ValueError и др.) в понятные пользователю сообщения на русском
17	forms	Модуль форм с валидацией (ProfileForm и др.) для ввода данных пользователя
18	views (index, about, contacts, privacy, flights)	Представления отображения веб-страниц: главная, о нас, контакты, политика конфиденциальности, рейсы с фильтрацией и пагинацией
19	views (login_view, register_view, logout_view)	Представления аутентификации: вход по email/паролю, регистрация с созданием аккаунта и пользователя, выход из системы
20	views (profile_view)	Представление профиля пользователя: личные данные, история заказов, вкладки отчётности и резервного копирования для менеджера и администратора
21	views (buy_ticket, buy_ticket_seat, buy_ticket_confirm)	Представления покупки билета: выбор рейса, выбор места и класса, ввод пассажира и оплата с созданием платежа, билета и багажа при необходимости
22	views (reports_view, export_statistics, backup_database, restore_database)	Представления отчётности, экспорта статистики в CSV/PDF и резервного копирования/восстановления БД (последние — только для администратора)
23	views (custom_page_not_found, page_not_found_catchall, custom_server_error)	Обработчики ошибок: страница не найдена (404) и ошибка сервера (500)
24	admin_views (admin_panel, admin_crud, admin_get_record, admin_get_options)	Представления панели администратора: отображение таблиц, CRUD по всем сущностям с валидацией и записью в журнал аудита, получение записи и опций для форм
25	admin_views (manager_panel, manager_crud, manager_get_record, manager_get_options)	Представления панели менеджера: CRUD по рейсам, пассажирам, платежам, билетам и багажу; валидация _validate_crud_data
26	api_views (ViewSet'ы)	ViewSet'ы REST API для аэропортов, рейсов, билетов, пользователей, аккаунтов, платежей, пассажиров, классов, самолётов, ролей, типов багажа и багажа
27	api_permissions	Модуль проверки прав доступа к API: авторизация по сессии, роль ADMIN для административных эндпоинтов
28	RoleSerializer	Сериализатор роли для преобразования в JSON и обратно
29	AirportSerializer	Сериализатор аэропорта для API
30	AirplaneSerializer	Сериализатор самолёта для API
31	FlightSerializer	Сериализатор рейса для API
32	PassengerSerializer	Сериализатор пассажира для API
33	ClassSerializer	Сериализатор класса обслуживания для API
34	AccountSerializer	Сериализатор аккаунта для API
35	UserSerializer	Сериализатор пользователя для API
36	PaymentSerializer	Сериализатор платежа для API
37	TicketSerializer	Сериализатор билета для API
38	BaggageTypeSerializer	Сериализатор типа багажа для API
39	BaggageSerializer	Сериализатор багажа для API
40	Django ORM (Model.objects)	Доступ к данным через менеджеры моделей (objects): фильтрация, создание, обновление, удаление; отдельные классы репозиториев не используются
41	context_processors.admin_status	Контекст-процессор, добавляющий is_admin, is_manager и is_authenticated в контекст всех шаблонов на основе account.role_id.role_name
42	apps (accounts, catalog, leasing, core, manager, control_panel)/urls	Маршрутизация URL приложения airline
43	LeaseGrow/settings	Настройки проекта Django: БД, приложения, шаблоны, статика, middleware
44	manage	Точка входа Django для запуска сервера и команд
45	scripts/setup_database	Скрипт инициализации БД: выполнение SQL (таблицы, триггеры, процедуры, представления) и загрузка начальных данных
46	base.html	Базовый шаблон с шапкой, навигацией по ролям, футером, баннером согласия с политикой и переключением светлой/тёмной темы
47	index.html	Шаблон главной страницы с каруселью, блоками предложений и призывом к рейсам
48	login.html	Шаблон формы входа с полями email и пароля
49	register.html	Шаблон формы регистрации с полями ФИО, email, пароля и подтверждения пароля
50	flights.html	Шаблон страницы рейсов с формой фильтров (город вылета/прилёта, дата, статус)
51	flights_table.html	Шаблон таблицы рейсов с кнопкой «Купить билет»
52	flights_pagination.html	Фрагмент пагинации для списка рейсов
53	buy_ticket_step1.html	Шаблон шага 1 покупки билета: выбор рейса и класса обслуживания
54	buy_ticket_step2.html	Шаблон шага 2: выбор места в салоне
55	buy_ticket_step3.html	Шаблон шага 3: данные пассажира, итоговая сумма и подтверждение оплаты
56	profile.html	Шаблон профиля пользователя с вкладками: личные данные, мои заказы, отчётность (менеджер/админ), резервное копирование (админ)
57	admin_panel.html	Шаблон панели администратора с выбором таблицы и CRUD-формами для всех сущностей
58	reports.html	Шаблон страницы отчётности с данными из представлений и процедур БД
59	statistics_export.html	Шаблон страницы экспорта статистики в CSV/PDF
60	about.html	Шаблон страницы «О нас»
61	contacts.html	Шаблон страницы «Контакты»
62	privacy.html	Шаблон страницы политики обработки персональных данных
63	404.html	Шаблон страницы «Страница не найдена»
64	500.html	Шаблон страницы ошибки сервера
65	style.css, pages.css	Стили: переменные светлой/тёмной темы, шапка, футер, страницы, формы, карточки
66	apps (accounts, catalog, leasing, core, manager, control_panel)/static/images/	Изображения: логотип, фоны для главной и рейсов
67	brandbook.html	Страница брендбука (цвета, логотип) для просмотра без запуска сайта
68	templatetags/audit_filters	Пользовательские теги/фильтры для шаблонов (аудит и др.)

2.3.6.	Схема тестирования
Схема тестирования приведена в Приложении А «Сценарий и результаты тестовых испытаний».
2.3.7.	Схема пользовательского интерфейса
На Рисунке 10 продемонстрирована схема интерфейса веб приложения. На данной схеме продемонстрированы все экраны и процесс навигации между ними.
 
Рисунок 10 – Схема пользовательского интерфейса.
2.4.	Брендбук
Цветовая система построена на двух темах: светлой и тёмной. Светлая тема использует белый фон (#FFFFFF) и вторичный фон (#f8f9fa), градиенты фона (#f5f7fa → #e4edf5), тёмно-серый текст (#333, вторичный #2c3e50, приглушённый #7f8c8d) и границы (#e1e8ed). Акцентные цвета — зелёные оттенки (Primary: #0bda51, Secondary: #08a53d), используются для логотипа, ссылок, кнопок и выделений. Тёмная тема использует тёмные фоны (#1c1c1c, #2a2a2a), светлый текст (#ffffff, приглушённый #bdc3c7), границы (#3a3a3a); акценты остаются зелёными (#0bda51, #08a53d). Система поддерживает градиенты для hero-секций, заголовков страниц и кнопок.
Типографика основана на системном стеке шрифтов: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif. Используются начертания: Regular (400) для основного текста, Semi-Bold (600) для навигации и кнопок, Bold (700) для заголовков. Размеры: крупные заголовки страниц — до 42px, заголовки в шапке — 28px, основной текст — 16px, вторичный — 14px.
Компоненты интерфейса включают кнопки с градиентными заливками (зелёный градиент) и состояниями hover, карточки со скруглением 20px и тенями, формы с границами и состояниями focus. Все компоненты поддерживают обе темы за счёт CSS-переменных (--bg-color, --text-color, --border-color и т.д.) и переключения атрибута data-theme="dark".
Сетка и отступы: контейнер с max-width 1200px и отступами по 20px; шапка с padding 15px 30px и скруглением 20px; карточки с padding 30px и скруглением 20px. Радиусы скругления: карточки и блоки — 20px, кнопки — 8px.
Иконки в проекте используются по мере необходимости для навигации, рейсов, профиля и панелей управления; отдельная библиотека иконок в коде не подключалась — акцент сделан на типографике и цвете.
Брендбук обеспечивает единообразие интерфейса LeaseGrow, улучшает читаемость и поддерживает переключение между светлой и тёмной темами с сохранением визуальной иерархии и доступности.
 
Рисунок 11 – Брендбук логотипа.
 
Рисунок 12 – Брендбук цветов.
2.5.	Описание бэкапов и процедуры восстановления
В информационной системе LeaseGrow реализовано резервное копирование и восстановление базы данных. Резервные копии создаются администратором через веб-интерфейс (вкладка «Восстановление» в профиле администратора) или с использованием утилиты pg_dump; путь к pg_dump при необходимости задаётся в переменной окружения PG_BIN_PATH (например, для Windows). Создаётся полный дамп базы данных в формате SQL. Восстановление выполняется путём загрузки выбранного .sql файла через тот же интерфейс (вызов psql или выполнение SQL через подключение к БД). Рекомендуется выполнять резервное копирование регулярно (например, ежедневно) и перед значительными изменениями схемы или данных. Хранение копий осуществляется на сервере или на внешних носителях по решению администратора.
2.6.	Результат работы программы
В результате выполнения поставленной задачи была реализована информационная система LeaseGrow, состоящая из реляционной базы данных PostgreSQL. В качестве серверной части разработано веб-приложение на базе Django, предоставляющее REST API и представления (views), со слоем форм, аутентификацией по email/логину и паролю и разграничением доступа по ролям (клиент, менеджер, администратор). В качестве клиентской части реализован веб-интерфейс на основе шаблонов Django (HTML), включающий главную страницу, страницу «Политика конфиденциальности», каталог техники (страница «Лизинг»), оформление заявок на лизинг и чат с менеджером, профиль пользователя с редактированием данных, панель менеджера (CRUD по ограниченному набору таблиц; статистика с диаграммами; экспорт в Excel и PDF; чат с клиентами), панель администратора (CRUD по всем сущностям, журнал аудита, резервное копирование и восстановление базы данных).
Исходный код программы представлен в приложении Г. Текст программы.
Структура и скрипт базы данных представлены в приложении В. Скрипт базы данных.
Информация о взаимодействии пользователя с информационной системой представлена в приложении Б. Руководство пользователя.
На Рисунках 13–15 приведены примеры работы веб-приложения.
 
Рисунок 13 – Экран авторизации.
 
Рисунок 14 – Профиль пользователя.
 
Рисунок 15 – Панель администратора.
 
3.	ТЕХНОЛОГИЧЕСКАЯ ЧАСТЬ
3.1.	Инструментальные средства
В качестве средства хранения данных выбрана реляционная СУБД PostgreSQL, нормализованная до третьей нормальной формы. PostgreSQL обеспечивает надёжность, соответствие стандартам SQL и возможность использования процедур, триггеров и представлений.
Для серверной части использованы язык Python и фреймворк Django. Django предоставляет ORM, встроенную аутентификацию, систему шаблонов и удобную организацию приложений. В проекте задействованы Django REST Framework (API при необходимости), Django-формы и middleware. Для работы с БД используется Django ORM в сочетании с сырыми SQL-скриптами (create_tables.sql, triggers.sql, procedures_views.sql), выполняемыми скриптом setup_database.py. Пароли хранятся в виде хэша (make_password, check_password). Для шаблонов применяется Django Templates; статика (CSS, изображения) размещена в apps (accounts, catalog, leasing, core, manager, control_panel)/static/. В качестве IDE использован VS Code. Зависимости заданы в requirements.txt (Django 5.2, psycopg2-binary, python-dotenv, djangorestframework, pillow, locust и др.).
3.2.	Отладка программы
Отладка производилась с использованием встроенных средств VS Code (точки останова, пошаговое выполнение, просмотр переменных). Для отладки веб-интерфейса использовались инструменты разработчика браузера (Яндекс DevTools): проверка сетевых запросов, DOM и консоль. Тестирование проводилось в браузерах Яндекс Браузера и аналогах на базе Windows 11.
3.3.	Защитное программирование
3.3.1.	Защита от ошибок
Валидация данных выполняется в формах Django (ProfileForm и др.) и в функциях CRUD панели администратора/менеджера (_validate_crud_data): проверка обязательных полей, длины строк, формата телефона и паспорта, допустимых значений choice-полей, неотрицательности сумм и количеств. При ошибке пользователю возвращаются сообщения об ошибках без сохранения данных.
 
Рисунок 16 – Защиты от ошибок.
3.3.2.	Защита приложения
Для каждого вводимого поля предусмотрена проверка на корректность (email, пароль при логине; данные профиля; данные при покупке билета и в формах CRUD). Используются встроенные валидаторы Django и собственные проверки в представлениях. Доступ к панелям менеджера и администратора и к функциям резервного копирования/восстановления ограничен по роли (проверка account.role_id.role_name).
 
Рисунок 17 – Проверка роли.
3.3.3.	Защита данных
В БД используются ограничения UNIQUE (email, passport_number, registration_number, flight_id+seat_number, baggage_tag), внешние ключи и проверка check_departure_before_arrival для рейсов. Пароли не хранятся в открытом виде. Обработка исключений в коде (try/except) предотвращает необработанные сбои и позволяет возвращать пользователю понятные сообщения.
3.4.	Характеристики программы
Таблица 9 – Модули приложения
№	Наименование модуля	Описание
Представления (views)
1	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления для отображения веб-страниц: главная (index), о нас (about), контакты (contacts), политика конфиденциальности (privacy), рейсы с фильтрацией и пагинацией (flights)
2	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления аутентификации: вход (login_view), регистрация (register_view), выход (logout_view)
3	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представление профиля пользователя (profile_view): личные данные, история заказов, вкладки отчётности и резервного копирования для менеджера/администратора
4	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления покупки билета: выбор рейса (buy_ticket), выбор места и класса (buy_ticket_seat), подтверждение и оплата (buy_ticket_confirm)
5	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления отчётности и экспорта: страница отчётности (reports_view), экспорт статистики в CSV/PDF (export_statistics)
6	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Представления резервного копирования и восстановления БД (backup_database, restore_database) — только для администратора
7	apps (accounts, catalog, leasing, core, manager, control_panel)/views.py	Обработчики ошибок: страница не найдена (custom_page_not_found, page_not_found_catchall), ошибка сервера (custom_server_error)
8	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	Панель администратора (admin_panel): CRUD по всем таблицам (роли, аккаунты, пользователи, аэропорты, самолёты, рейсы, пассажиры, классы, платежи, билеты, типы багажа, багаж)
9	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	CRUD-операции администратора (admin_crud): создание, обновление и удаление записей с валидацией и записью в журнал аудита
10	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	Вспомогательные представления администратора: получение записи (admin_get_record), получение опций для форм (admin_get_options)
11	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	Панель менеджера (manager_panel): CRUD по ограниченному набору таблиц (рейсы, пассажиры, платежи, билеты, багаж)
12	apps (accounts, catalog, leasing, core, manager, control_panel)/admin_views.py	CRUD-операции менеджера (manager_crud) и вспомогательные представления (manager_get_record, manager_get_options)
Формы и валидация
13	apps (accounts, catalog, leasing, core, manager, control_panel)/forms.py	Формы с валидацией: ProfileForm и другие формы для ввода данных пользователя
Отчёты и процедуры БД
14	apps (accounts, catalog, leasing, core, manager, control_panel)/db_reports.py	Вызов процедур и представлений PostgreSQL: выручка по рейсу (get_flight_revenue), загрузка рейса (get_flight_occupancy), платежи пользователя за период (get_user_payments_in_period)
15	apps (accounts, catalog, leasing, core, manager, control_panel)/db_reports.py	Получение отчётных данных: отчёт по рейсам (get_flights_report), выручка по аэропортам (get_airports_revenue_report), операции аудита (get_audit_operations_report), выручка и загрузка по списку рейсов (get_revenue_occupancy_for_flights)
Аудит и обработка ошибок
16	apps (accounts, catalog, leasing, core, manager, control_panel)/audit_utils.py	Утилиты журнала аудита: преобразование экземпляра модели в словарь (model_instance_to_audit_dict), получение ID записи (get_record_id_for_audit), запись в audit_log (log_audit) при создании/обновлении/удалении через админ-CRUD
17	apps (accounts, catalog, leasing, core, manager, control_panel)/exceptions_utils.py	Преобразование исключений в понятные пользователю сообщения на русском (get_user_friendly_message): IntegrityError, ValidationError, PermissionDenied, Http404, ValueError и др.
Модели данных (Models)
18	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Role — модель роли пользователя (USER, MANAGER, ADMIN)
19	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Account — модель аккаунта (email, пароль, роль, дата создания)
20	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	User — модель профиля пользователя (связь с аккаунтом, ФИО, телефон, паспорт, дата рождения)
21	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Airport — модель аэропорта (код ИАТА, название, город, страна)
22	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Airplane — модель самолёта (модель, бортовой номер, вместимость, классы, ряды и места)
23	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Flight — модель рейса (самолёт, аэропорты вылета/прилёта, время, статус)
24	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Passenger — модель пассажира (ФИО, паспорт, дата рождения)
25	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Class — модель класса обслуживания (ECONOMY, BUSINESS, FIRST)
26	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Payment — модель платежа (пользователь, сумма, способ оплаты, статус)
27	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Ticket — модель билета (рейс, класс, место, цена, статус, пассажир, платёж)
28	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	BaggageType — модель типа багажа (название, макс. вес, базовая цена)
29	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	Baggage — модель багажа (билет, тип, вес, номер бирки, статус)
30	apps (accounts, catalog, leasing, core, manager, control_panel)/models.py	AuditLog — модель журнала аудита (таблица, запись, операция, старые/новые данные, кто изменил, когда)
API (REST)
31	apps (accounts, catalog, leasing, core, manager, control_panel)/api_views.py	ViewSet'ы для REST API: AirportViewSet, FlightViewSet, TicketViewSet, UserViewSet, AccountViewSet, PaymentViewSet, PassengerViewSet, ClassViewSet, AirplaneViewSet, RoleViewSet, BaggageTypeViewSet, BaggageViewSet
32	apps (accounts, catalog, leasing, core, manager, control_panel)/serializers.py	Сериализаторы для преобразования моделей в JSON: RoleSerializer, AirportSerializer, AirplaneSerializer, FlightSerializer, PassengerSerializer, ClassSerializer, AccountSerializer, UserSerializer, PaymentSerializer, TicketSerializer, BaggageTypeSerializer, BaggageSerializer
33	apps (accounts, catalog, leasing, core, manager, control_panel)/api_permissions.py	Проверка прав доступа к API (авторизация по сессии, роль ADMIN для административных эндпоинтов)
Конфигурация и инфраструктура
34	apps (accounts, catalog, leasing, core, manager, control_panel)/urls.py	Маршрутизация URL приложения airline
35	config/urls.py	Главный маршрутизатор URL проекта
36	config/settings	Настройки Django (БД, приложения, шаблоны, статика, middleware, context processors)
37	apps (accounts, catalog, leasing, core, manager, control_panel)/context_processors.py	Контекст-процессор admin_status: добавление is_admin, is_manager, is_authenticated в контекст всех шаблонов на основе account.role_id.role_name
38	apps (accounts, catalog, leasing, core, manager, control_panel)/middleware.py	Промежуточное ПО приложения (при наличии)
39	apps (accounts, catalog, leasing, core, manager, control_panel)/apps.py	Конфигурация приложения airline
40	manage.py	Утилита управления Django
Скрипты базы данных
41	scripts/create_tables.sql	Создание таблиц PostgreSQL (roles, accounts, users, airports, airplanes, flights, passengers, class, payments, tickets, baggage_types, baggage, audit_log)
42	scripts/triggers.sql	Триггеры: запись в журнал аудита, генерация номеров билетов/багажных бирок
43	scripts/procedures_views.sql	Процедуры: calc_flight_revenue, calc_flight_occupancy, calc_user_payments_in_period; представления отчётности: v_flights_report, v_airports_revenue_report, v_audit_operations_report
44	scripts/insert_initial_data.sql	Начальные данные (роли, аэропорты, классы, типы багажа, тестовые данные)
45	scripts/setup_database.py	Скрипт инициализации БД: создание БД, выполнение SQL (таблицы, триггеры, процедуры/представления), загрузка данных; флаги --create, --seed, --init-db, --fake-migrate
46	scripts/setup_database.bat	Пакетный файл для запуска setup_database.py в Windows
Шаблоны (Templates - Django)
47	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/base.html	Базовый шаблон: шапка с навигацией, футер, баннер согласия с политикой, переключение темы
48	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/index.html	Главная страница (карусель, блоки предложений, призыв к рейсам)
49	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/about.html	Страница «О нас»
50	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/contacts.html	Страница «Контакты»
51	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/privacy.html	Страница политики обработки персональных данных
52	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/login.html	Страница входа в систему
53	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/register.html	Страница регистрации
54	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/flights.html	Страница рейсов (фильтры, форма поиска)
55	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/flights_table.html	Таблица рейсов с пагинацией
56	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/flights_pagination.html	Фрагмент пагинации для рейсов
57	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/buy_ticket_step1.html	Шаг 1 покупки билета: выбор рейса
58	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/buy_ticket_step2.html	Шаг 2: выбор места и класса
59	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/buy_ticket_step3.html	Шаг 3: данные пассажира и оплата
60	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/profile.html	Профиль пользователя (вкладки: личные данные, мои заказы, отчётность, резервное копирование)
61	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/admin_panel.html	Панель администратора (таблицы, CRUD-формы)
62	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/reports.html	Страница отчётности (данные из представлений и процедур БД)
63	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/statistics_export.html	Страница экспорта статистики (при необходимости отдельный шаблон)
64	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/404.html	Страница «Страница не найдена»
65	apps (accounts, catalog, leasing, core, manager, control_panel)/templates/500.html	Страница ошибки сервера
Статика и прочее
66	apps (accounts, catalog, leasing, core, manager, control_panel)/static/css/style.css	Основные стили: переменные светлой/тёмной темы, шапка, футер, общие компоненты
67	apps (accounts, catalog, leasing, core, manager, control_panel)/static/css/pages.css	Стили страниц: о нас, контакты, рейсы, профиль, панели, формы
68	apps (accounts, catalog, leasing, core, manager, control_panel)/static/images/	Изображения: логотип, фоны, иллюстрации для главной и рейсов
69	apps (accounts, catalog, leasing, core, manager, control_panel)/static/brandbook.html	Страница брендбука (цвета, логотип) — открывается локально без запуска сайта
70	apps (accounts, catalog, leasing, core, manager, control_panel)/templatetags/audit_filters.py	Пользовательские теги/фильтры для шаблонов (аудит и др.)
Тесты
71	tests/test_api.py	Тесты API
72	tests/test_crud.py	Тесты CRUD
73	tests/test_export.py	Тесты экспорта
74	tests/test_views.py	Тесты веб-страниц
75	tests/locust/locustfile.py	Нагрузочные тесты (Locust)
Внешние библиотеки и зависимости
75	Django 5.2	Фреймворк для создания веб-приложений на Python
76	Django REST Framework	Реализация REST API и сериализаторов
77	PostgreSQL (psycopg2-binary)	Подключение к реляционной базе данных PostgreSQL
78	python-dotenv	Загрузка переменных окружения из .env
79	Pillow	Обработка изображений (при необходимости)
80	Locust	Нагрузочное тестирование приложения

 
ЗАКЛЮЧЕНИЕ
В ходе выполнения проекта по созданию веб-приложения LeaseGrow были выполнены следующие действия.
Спроектирована информационная система: проведён анализ предметной области (лизинг техники, каталог, заявки, договоры, чат), определены роли пользователей (Клиент, Менеджер, Администратор), составлены логическая и физическая модели базы данных, архитектурная и структурная схемы приложения. Постановка задачи преобразована в перечень программных решений и реализована в виде веб-приложения на Django и базы данных PostgreSQL.
Реализована база данных: на основе проектирования созданы таблицы (role, account, user_profile, equipment_category, manufacturer, equipment, company, company_contact, lease_contract, payment_schedule, maintenance, maintenance_request, lease_request, chat_message, audit_log). Обеспечены целостность данных (внешние ключи, уникальные ограничения), хранение паролей в виде хэша и логирование изменений через журнал аудита.
Реализовано веб-приложение: публичные страницы (главная, политика конфиденциальности), страница каталога техники «Лизинг», регистрация и авторизация, профиль пользователя с редактированием данных, оформление заявок на лизинг и чат с менеджером. Реализованы панель менеджера (CRUD по ограниченному набору таблиц, чат с клиентами, статистика с экспортом в Excel и PDF) и панель администратора (полный CRUD по всем сущностям, журнал аудита, резервное копирование и восстановление БД). Интерфейс имеет понятную навигацию и разграничение доступа по ролям.
Обеспечено сопровождение: исходный код структурирован по приложениям (apps.accounts, apps.catalog, apps.leasing, apps.core, apps.manager, apps.control_panel), миграции Django обеспечивают целостность схемы БД, документация и README описывают запуск проекта и роли пользователей.
Таким образом, созданное программное решение LeaseGrow реализует необходимый набор функций для оформления лизинга техники и управления данными компании, соответствует поставленной задаче и может быть использовано как основа корпоративного сайта лизинговой компании. 
СПИСОК ИСПОЛЬЗОВАННЫХ МАТЕРИАЛОВ
1.	ГОСТ 19404-79 ЕСПД. Пояснительная записка. ПЕРЕИЗДАНИЕ Января 2010 г.
2.	ГОСТ 7.80-2000 СИБИД. Библиографическая запись. Заголовок. Общие требования и правила составления.
3.	ГОСТ Р 7.0.5-2008 БИБЛИОГРАФИЧЕСКАЯ ССЫЛКА. Общие требования и правила составления.
4.	ГОСТ 19.101-77 ЕСПД. Виды программ и программных документов.
5.	ГОСТ 19.103-77 ЕСПД. Обозначение программ и программных документов.
6.	ГОСТ 19.105-78 ЕСПД. Общие требования к программным документам.
7.	Google Material Design – Руководство по дизайну интерфейсов. URL – https://material.io/design
8.	GitHub. Распределенная система контроля версий – URL – https://github.com/
9.	Google Classroom – Документы для КП МДК 01.01 РПМ. URL – https://classroom.google.com/c/NzQ0NzY2Mzc0Mzc4/m/NzQ0NzY2Mzc0NDE1/details
10.	Stack Overflow – Вопросы и ответы для программистов. URL – https://stackoverflow.com/







	
